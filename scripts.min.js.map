{"version":3,"sources":["webpack:///./app-js/common/tools.js","webpack:///./app-js/libs/lodash.js","webpack:///./app-js/libs/index.js","webpack:///./app-js/libs/axios.js","webpack:///./app-js/libs/events.js","webpack:///./app-components/templates/templates.js","webpack:///./app-components/youtube/youtube.js","webpack:///./app-js/main.js"],"names":["el","selector","ctx","document","querySelector","all","querySelectorAll","obj","arObjects","_","assign","Object","create","ready","fn","readyState","e","on","getScrollbarWidth","window","innerWidth","documentElement","clientWidth","getSearch","str","location","search","URLSearchParams","strSearch","toString","formatDateTime","options","date","Date","Intl","DateTimeFormat","format","toPartsDateTime","formatToParts","map","each","reduce","replace","template","toUpper","isFunction","isString","trim","size","noop","has","SmoothScroll","speed","speedAsDuration","isData","data","resError","Promise","reject","instance","axios","baseURL","method","transformRequest","total","item","key","append","FormData","interceptors","request","use","config","params","response","then","res","wrapper","name","event","target","events","currentTarget","closest","args","once","off","get","emit","CustomEvent","detail","dispatchEvent","tpl","this","templates","$","markup","Boolean","textContent","state","compiled","youtube","list","src","iframe","autoplay","showinfo","rel","videos","length","addJs","onYouTubeIframeAPIReady","bind","innerHTML","player","videoId","getAttribute","YT","Player","playerVars","onReady","onStateChange","push","PlayerState","PLAYING","video","stopVideo","setupVideo","link","removeAttribute","classList","add","setPlayer","firstScript","script","createElement","parentNode","insertBefore","init","Ajax","json","console","log","url","body","insertAdjacentHTML","render","q","topic"],"mappings":"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","file":"scripts.min.js","sourcesContent":["import { e } from 'libs';\n\nexport default {\n  el(selector, ctx = document) {\n    return ctx.querySelector(selector);\n  },\n\n  all(selector, ctx = document) {\n    return [...ctx.querySelectorAll(selector)];\n  },\n\n  obj(...arObjects) {\n    return _.assign(Object.create(null), ...arObjects);\n  },\n\n  ready(fn) {\n    if (document.readyState !== 'loading') {\n      fn();\n    } else {\n      e.on('DOMContentLoaded', document, fn);\n    }\n  },\n\n  getScrollbarWidth() {\n    return window.innerWidth - document.documentElement.clientWidth;\n  },\n\n  getSearch(str = window.location.search) {\n    return new URLSearchParams(str);\n  },\n\n  strSearch(obj) {\n    return new URLSearchParams(obj).toString();\n  },\n\n  formatDateTime(options = {}, date = new Date()) {\n    return new Intl.DateTimeFormat('ru', options).format(date);\n  },\n\n  toPartsDateTime(options = {}, date = new Date()) {\n    return new Intl.DateTimeFormat('ru', options).formatToParts(date);\n  },\n};\n","import map from 'lodash/map';\nimport each from 'lodash/forEach';\nimport reduce from 'lodash/reduce';\nimport replace from 'lodash/replace';\nimport template from 'lodash/template';\nimport toUpper from 'lodash/toUpper';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport assign from 'lodash/assign';\nimport trim from 'lodash/trim';\nimport size from 'lodash/size';\nimport noop from 'lodash/noop';\nimport has from 'lodash/has';\n\nexport default {\n  map,\n  each,\n  reduce,\n  replace,\n  template,\n  toUpper,\n  isFunction,\n  isString,\n  assign,\n  trim,\n  size,\n  noop,\n  has,\n};\n","import SmoothScroll from 'smooth-scroll';\nimport Ajax from './axios';\nimport e from './events';\n\nnew SmoothScroll('a[href*=\"#\"]', { // eslint-disable-line no-new\n  speed: 500,\n  speedAsDuration: true,\n});\n\nexport { Ajax };\nexport { e };\n","import axios from 'axios';\n\nconst isData = data => data && _.size(data);\nconst resError = e => Promise.reject(e);\n\nconst instance = axios.create({\n  baseURL: '../ajax/',\n  method: 'post',\n  transformRequest(data) {\n    if (isData(data)) {\n      return _.reduce(data, (total, item, key) => {\n        total.append(key, item);\n        return total;\n      }, new FormData());\n    }\n  },\n});\n\ninstance.interceptors.request.use((config) => {\n  if (config.method === 'get' && isData(config.data)) {\n    config.params = config.data;\n  }\n\n  return config;\n}, resError);\n\ninstance.interceptors.response.use(({ data }) => data, resError);\n\nexport default (data, fn) => {\n  instance(data).then((res) => {\n    fn(res);\n  });\n};\n","import events from 'eventslibjs';\n\nfunction wrapper(name, event, target, fn) {\n  events[name](event, target, (e) => {\n    const currentTarget = _.isString(target) ? e.target.closest(target) : target;\n    fn(e, currentTarget);\n  });\n}\n\nexport default {\n  on(...args) { wrapper('on', ...args); },\n\n  once(...args) { wrapper('once', ...args); },\n\n  off: events.off,\n\n  get: events.get,\n\n  emit(name, el = document, params = {}) {\n    const event = new CustomEvent(name, { detail: params });\n    el.dispatchEvent(event);\n  },\n};\n","import $ from 'common/tools';\n\nclass Tpl {\n  constructor() {\n    this.private = {\n      templates: $.el('#templates'),\n    };\n  }\n\n  get(name) {\n    let markup = '';\n    if (_.isString(name) && Boolean(name)) {\n      const el = $.el(`[title=\"${name}\"]`, this.private.templates);\n      markup = _.trim(el.textContent);\n    }\n    return markup;\n  }\n\n  render(state, template) {\n    const markup = this.get(template);\n    const compiled = _.template(markup);\n    const data = _.assign({ _ }, state);\n    return compiled(data);\n  }\n}\n\nconst tpl = new Tpl();\n\nexport default tpl;\n","import { e } from 'libs';\nimport $ from 'common/tools';\n\nclass YouTube {\n  constructor() {\n    this.list = [];\n    this.src = 'https://www.youtube.com/iframe_api';\n    this.iframe = '<i class=\"youtube__media js-youtube-api\"></i>';\n    this.params = {\n      autoplay: 1,\n      showinfo: 0,\n      rel: 0,\n    };\n  }\n\n  init() {\n    const videos = $.all('.js-youtube');\n\n    if (!videos.length) return;\n\n    this.addJs();\n    window.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady.bind(this, videos);\n  }\n\n  setPlayer(el) {\n    el.innerHTML = this.iframe;\n    const player = $.el('.js-youtube-api', el);\n    const videoId = el.getAttribute('data-id');\n\n    new window.YT.Player(player, { // eslint-disable-line no-new\n      videoId,\n      playerVars: this.params,\n      events: {\n        onReady: this.onReady.bind(this),\n        onStateChange: this.onStateChange.bind(this),\n      },\n    });\n  }\n\n  onReady(event) {\n    this.list.push(event.target);\n  }\n\n  onStateChange(event) {\n    if (event.data !== window.YT.PlayerState.PLAYING) return;\n\n    _.each(this.list, (video) => {\n      if (event.target !== video) video.stopVideo();\n    });\n  }\n\n  onYouTubeIframeAPIReady(videos) {\n    _.each(videos, (video) => {\n      this.setupVideo(video);\n    });\n  }\n\n  setupVideo(video) {\n    const link = $.el('.js-youtube--link', video);\n    link.removeAttribute('href');\n    link.removeAttribute('target');\n    video.classList.add('youtube--enabled');\n\n    e.once('click', video, () => {\n      this.setPlayer(video);\n    });\n  }\n\n  addJs() {\n    const firstScript = $.el('script');\n    const script = document.createElement('script');\n    script.src = this.src;\n    firstScript.parentNode.insertBefore(script, firstScript);\n  }\n}\n\nconst youtube = new YouTube();\n\nexport default youtube;\n","import { Ajax, e } from 'libs';\nimport $ from 'common/tools';\nimport tpl from 'components/templates/templates';\nimport youtube from 'components/youtube/youtube';\n\n$.ready(() => {\n  youtube.init();\n\n  Ajax({\n    data: { request: 'axios' },\n  }, (json) => {\n    console.log(json);\n  });\n\n  Ajax({\n    method: 'get',\n    url: 'https://jsonplaceholder.typicode.com/todos/1',\n  }, (json) => {\n    document.body.insertAdjacentHTML('beforeend', tpl.render(json, 'template'));\n  });\n\n  e.once('custom:event', document, () => {\n    console.log('Event: custom:event');\n  });\n\n  e.emit('custom:event');\n\n  console.log(e.get());\n  console.log($.getScrollbarWidth()+'px');\n  console.log($.getSearch('?q=URLUtils.searchParams&topic=api&topic=webdev').get('q'));\n  console.log($.strSearch({\n    q: 'URLUtils.searchParams',\n    topic: 'webdev',\n  }));\n});\n"],"sourceRoot":""}