{"version":3,"sources":["webpack:///./app-js/main.js","webpack:///./app-js/common/tools.js","webpack:///./app-js/global/events.js","webpack:///./app-js/libs/index.js","webpack:///./app-js/libs/axios.js","webpack:///./app-js/global/lodash.js","webpack:///./app-js/store/index.js","webpack:///./app-components/templates/templates.js","webpack:///./app-components/youtube/youtube.js"],"names":["$","ready","youtube","init","console","log","store","total","Ajax","method","params","req","data","request","axios","url","local","json","document","body","insertAdjacentHTML","tpl","render","ev","once","emit","scroll","get","getSearch","strSearch","q","topic","el","selector","ctx","querySelector","all","querySelectorAll","obj","arObjects","_","assign","Object","create","fn","readyState","on","deleteQuote","value","isString","replace","getNumberOnly","parseInt","getScrollbarWidth","window","innerWidth","documentElement","clientWidth","str","location","search","URLSearchParams","toString","formatDateTime","options","date","Date","Intl","DateTimeFormat","format","toPartsDateTime","formatToParts","currentTarget","target","current","closest","off","event","noop","e","detail","name","CustomEvent","dispatchEvent","SmoothScroll","speed","speedAsDuration","isData","size","resError","Promise","reject","instance","baseURL","transformRequest","qs","stringify","interceptors","use","config","response","args","isFunction","last","pop","map","then","spread","each","reduce","template","toUpper","trim","has","Store","this","basket","price","push","prev","curr","decorate","observable","computed","select","action","autorun","toJS","transaction","templates","markup","Boolean","textContent","state","compiled","list","src","iframe","autoplay","showinfo","rel","videos","length","addJs","onYouTubeIframeAPIReady","bind","innerHTML","player","videoId","getAttribute","YT","Player","playerVars","events","onReady","onStateChange","PlayerState","PLAYING","video","stopVideo","setupVideo","link","removeAttribute","classList","add","setPlayer","firstScript","script","createElement","parentNode","insertBefore"],"mappings":"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","file":"scripts.min.js","sourcesContent":["import { Ajax, scroll } from 'libs';\nimport $ from 'common/tools';\nimport store from 'root/store';\nimport tpl from 'components/templates/templates';\nimport youtube from 'components/youtube/youtube';\n\n$.ready(() => {\n  youtube.init();\n  console.log(store.total);\n\n  Ajax({\n    method: 'post',\n    params: { req: 'params' },\n    data: {\n      request: {\n        axios: true,\n      },\n    },\n  }, {\n    method: 'get',\n    url: 'https://jsonplaceholder.typicode.com/todos/1',\n  }, (local, json) => {\n    console.log(local);\n    document.body.insertAdjacentHTML('beforeend', tpl.render(json, 'template'));\n  });\n\n  ev.once('custom:event', document, () => {\n    console.log('Event: custom:event');\n  });\n\n  ev.emit('custom:event');\n\n  console.log(scroll);\n  console.log(ev.get());\n  console.log($.getSearch('?q=URLUtils.searchParams&topic=api&topic=webdev').get('q'));\n  console.log($.strSearch({\n    q: 'URLUtils.searchParams',\n    topic: 'webdev',\n  }));\n});\n","export default {\n  el(selector, ctx = document) {\n    return ctx.querySelector(selector);\n  },\n\n  all(selector, ctx = document) {\n    return [...ctx.querySelectorAll(selector)];\n  },\n\n  obj(...arObjects) {\n    return _.assign(Object.create(null), ...arObjects);\n  },\n\n  ready(fn) {\n    if (document.readyState !== 'loading') {\n      fn();\n    } else {\n      ev.on('DOMContentLoaded', document, fn);\n    }\n  },\n\n  deleteQuote(value) {\n    if (_.isString(value)) return _.replace(value, /['\"]/gi, '');\n    return value;\n  },\n\n  getNumberOnly(value) {\n    return parseInt(_.replace(value, /\\D+/g, ''), 10);\n  },\n\n  getScrollbarWidth() {\n    return window.innerWidth - document.documentElement.clientWidth;\n  },\n\n  getSearch(str = window.location.search) {\n    return new URLSearchParams(str);\n  },\n\n  strSearch(obj) {\n    return new URLSearchParams(obj).toString();\n  },\n\n  formatDateTime(options = {}, date = new Date()) {\n    return new Intl.DateTimeFormat('ru', options).format(date);\n  },\n\n  toPartsDateTime(options = {}, date = new Date()) {\n    return new Intl.DateTimeFormat('ru', options).formatToParts(date);\n  },\n};\n","import {\n  on,\n  once,\n  off,\n  get,\n} from 'eventslibjs/dist/events.min';\n\nfunction currentTarget(target, current) {\n  return _.isString(current) ? target.closest(current) : current;\n}\n\nexport default {\n  get() {\n    return get();\n  },\n\n  off(...args) {\n    off(...args);\n  },\n\n  on(event, current = document, fn = _.noop) {\n    on(event, current, (e) => {\n      fn(e, currentTarget(e.target, current), e.detail);\n    });\n  },\n\n  once(event, current = document, fn = _.noop) {\n    once(event, current, (e) => {\n      fn(e, currentTarget(e.target, current), e.detail);\n    });\n  },\n\n  emit(name, el = document, params = {}) {\n    const event = new window.CustomEvent(name, { detail: params });\n    el.dispatchEvent(event);\n  },\n};\n","import SmoothScroll from 'smooth-scroll';\nimport Ajax from './axios';\n\nconst scroll = new SmoothScroll('a[href*=\"#\"]', {\n  speed: 500,\n  speedAsDuration: true,\n});\n\nexport { Ajax, scroll };\n","import axios from 'axios';\nimport qs from 'qs';\n\nconst isData = data => data && _.size(data);\nconst resError = e => Promise.reject(e);\n\nconst instance = axios.create({\n  baseURL: '../ajax/',\n  method: 'post',\n  transformRequest(data) {\n    if (isData(data)) {\n      return qs.stringify(data);\n    }\n  },\n});\n\ninstance.interceptors.request.use((config) => {\n  if (config.method === 'get' && isData(config.data)) {\n    config.params = _.assign((config.params || {}), config.data);\n  }\n\n  return config;\n}, resError);\n\ninstance.interceptors.response.use(({ data }) => data, resError);\n\nexport default (...args) => {\n  const fn = (_.isFunction(_.last(args))) ? args.pop() : _.noop();\n  axios.all(_.map(args, req => instance(req))).then(axios.spread((...res) => fn(...res)));\n};\n","import map from 'lodash/map';\nimport each from 'lodash/forEach';\nimport reduce from 'lodash/reduce';\nimport replace from 'lodash/replace';\nimport template from 'lodash/template';\nimport toUpper from 'lodash/toUpper';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport assign from 'lodash/assign';\nimport trim from 'lodash/trim';\nimport size from 'lodash/size';\nimport noop from 'lodash/noop';\nimport has from 'lodash/has';\nimport last from 'lodash/last';\n\nexport default {\n  map,\n  each,\n  reduce,\n  replace,\n  template,\n  toUpper,\n  isFunction,\n  isString,\n  assign,\n  trim,\n  size,\n  noop,\n  has,\n  last,\n};\n","import {\n  observable,\n  computed,\n  action,\n  decorate,\n  autorun,\n  transaction,\n  toJS,\n} from 'mobx';\n\nclass Store {\n  constructor() {\n    this.basket = [];\n  }\n\n  get total() {\n    console.log('get total()');\n    return _.reduce(this.basket, (prev, curr) => prev + curr.price, 0);\n  }\n\n  select(name, price) {\n    this.basket.push({ name, price });\n  }\n}\n\ndecorate(Store, {\n  basket: observable,\n  total: computed,\n  select: action,\n});\n\nconst store = new Store();\n\nautorun(() => store.total);\n\nautorun(() => {\n  if (_.size(store.basket)) {\n    console.log(toJS(store.basket));\n  }\n});\n\ntransaction(() => {\n  store.select('html', 800);\n  store.select('css', 800);\n  store.select('js', 1500);\n});\n\nexport default store;\n","import $ from 'common/tools';\n\nclass Tpl {\n  constructor() {\n    this.private = {\n      templates: $.el('#templates'),\n    };\n  }\n\n  get(name) {\n    let markup = '';\n    if (_.isString(name) && Boolean(name)) {\n      const el = $.el(`[title=\"${name}\"]`, this.private.templates);\n      markup = _.trim(el.textContent);\n    }\n    return markup;\n  }\n\n  render(state, template) {\n    const markup = this.get(template);\n    const compiled = _.template(markup);\n    const data = _.assign({ _ }, state);\n    return compiled(data);\n  }\n}\n\nconst tpl = new Tpl();\n\nexport default tpl;\n","import $ from 'common/tools';\n\nclass YouTube {\n  constructor() {\n    this.list = [];\n    this.src = 'https://www.youtube.com/iframe_api';\n    this.iframe = '<i class=\"youtube__media js-youtube-api\"></i>';\n    this.params = {\n      autoplay: 1,\n      showinfo: 0,\n      rel: 0,\n    };\n  }\n\n  init() {\n    const videos = $.all('.js-youtube');\n\n    if (!videos.length) return;\n\n    this.addJs();\n    window.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady.bind(this, videos);\n  }\n\n  setPlayer(el) {\n    el.innerHTML = this.iframe;\n    const player = $.el('.js-youtube-api', el);\n    const videoId = el.getAttribute('data-id');\n\n    new window.YT.Player(player, { // eslint-disable-line no-new\n      videoId,\n      playerVars: this.params,\n      events: {\n        onReady: this.onReady.bind(this),\n        onStateChange: this.onStateChange.bind(this),\n      },\n    });\n  }\n\n  onReady(event) {\n    this.list.push(event.target);\n  }\n\n  onStateChange(event) {\n    if (event.data !== window.YT.PlayerState.PLAYING) return;\n\n    _.each(this.list, (video) => {\n      if (event.target !== video) video.stopVideo();\n    });\n  }\n\n  onYouTubeIframeAPIReady(videos) {\n    _.each(videos, (video) => {\n      this.setupVideo(video);\n    });\n  }\n\n  setupVideo(video) {\n    const link = $.el('.js-youtube--link', video);\n    link.removeAttribute('href');\n    link.removeAttribute('target');\n    video.classList.add('youtube--enabled');\n\n    ev.once('click', video, () => {\n      this.setPlayer(video);\n    });\n  }\n\n  addJs() {\n    const firstScript = $.el('script');\n    const script = document.createElement('script');\n    script.src = this.src;\n    firstScript.parentNode.insertBefore(script, firstScript);\n  }\n}\n\nconst youtube = new YouTube();\n\nexport default youtube;\n"],"sourceRoot":""}