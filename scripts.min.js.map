{"version":3,"sources":["webpack:///./app-js/libs/lodash.js","webpack:///./app-js/common/tools.js","webpack:///./app-js/libs/index.js","webpack:///./app-js/libs/axios.js","webpack:///./app-js/libs/events.js","webpack:///./app-js/store/index.js","webpack:///./app-components/templates/templates.js","webpack:///./app-components/youtube/youtube.js","webpack:///./app-js/main.js"],"names":["map","each","reduce","replace","template","toUpper","isFunction","isString","assign","trim","size","noop","has","el","selector","ctx","document","querySelector","all","querySelectorAll","obj","arObjects","_","Object","create","ready","fn","readyState","e","on","getScrollbarWidth","window","innerWidth","documentElement","clientWidth","getSearch","str","location","search","URLSearchParams","strSearch","toString","formatDateTime","options","date","Date","Intl","DateTimeFormat","format","toPartsDateTime","formatToParts","SmoothScroll","speed","speedAsDuration","isData","data","resError","Promise","reject","instance","axios","baseURL","method","transformRequest","total","item","key","append","FormData","interceptors","request","use","config","params","response","then","res","wrapper","name","event","target","events","currentTarget","closest","args","once","off","get","emit","CustomEvent","detail","dispatchEvent","Store","this","basket","price","push","console","log","prev","curr","decorate","observable","computed","select","action","store","autorun","toJS","transaction","tpl","templates","$","markup","Boolean","textContent","state","compiled","youtube","list","src","iframe","autoplay","showinfo","rel","videos","length","addJs","onYouTubeIframeAPIReady","bind","innerHTML","player","videoId","getAttribute","YT","Player","playerVars","onReady","onStateChange","PlayerState","PLAYING","video","stopVideo","setupVideo","link","removeAttribute","classList","add","setPlayer","firstScript","script","createElement","parentNode","insertBefore","init","Ajax","json","url","body","insertAdjacentHTML","render","q","topic"],"mappings":"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","file":"scripts.min.js","sourcesContent":["import map from 'lodash/map';\nimport each from 'lodash/forEach';\nimport reduce from 'lodash/reduce';\nimport replace from 'lodash/replace';\nimport template from 'lodash/template';\nimport toUpper from 'lodash/toUpper';\nimport isFunction from 'lodash/isFunction';\nimport isString from 'lodash/isString';\nimport assign from 'lodash/assign';\nimport trim from 'lodash/trim';\nimport size from 'lodash/size';\nimport noop from 'lodash/noop';\nimport has from 'lodash/has';\n\nexport default {\n  map,\n  each,\n  reduce,\n  replace,\n  template,\n  toUpper,\n  isFunction,\n  isString,\n  assign,\n  trim,\n  size,\n  noop,\n  has,\n};\n","import { e } from 'libs';\n\nexport default {\n  el(selector, ctx = document) {\n    return ctx.querySelector(selector);\n  },\n\n  all(selector, ctx = document) {\n    return [...ctx.querySelectorAll(selector)];\n  },\n\n  obj(...arObjects) {\n    return _.assign(Object.create(null), ...arObjects);\n  },\n\n  ready(fn) {\n    if (document.readyState !== 'loading') {\n      fn();\n    } else {\n      e.on('DOMContentLoaded', document, fn);\n    }\n  },\n\n  getScrollbarWidth() {\n    return window.innerWidth - document.documentElement.clientWidth;\n  },\n\n  getSearch(str = window.location.search) {\n    return new URLSearchParams(str);\n  },\n\n  strSearch(obj) {\n    return new URLSearchParams(obj).toString();\n  },\n\n  formatDateTime(options = {}, date = new Date()) {\n    return new Intl.DateTimeFormat('ru', options).format(date);\n  },\n\n  toPartsDateTime(options = {}, date = new Date()) {\n    return new Intl.DateTimeFormat('ru', options).formatToParts(date);\n  },\n};\n","import SmoothScroll from 'smooth-scroll';\nimport Ajax from './axios';\nimport e from './events';\n\nnew SmoothScroll('a[href*=\"#\"]', { // eslint-disable-line no-new\n  speed: 500,\n  speedAsDuration: true,\n});\n\nexport { Ajax };\nexport { e };\n","import axios from 'axios';\n\nconst isData = data => data && _.size(data);\nconst resError = e => Promise.reject(e);\n\nconst instance = axios.create({\n  baseURL: '../ajax/',\n  method: 'post',\n  transformRequest(data) {\n    if (isData(data)) {\n      return _.reduce(data, (total, item, key) => {\n        total.append(key, item);\n        return total;\n      }, new FormData());\n    }\n  },\n});\n\ninstance.interceptors.request.use((config) => {\n  if (config.method === 'get' && isData(config.data)) {\n    config.params = config.data;\n  }\n\n  return config;\n}, resError);\n\ninstance.interceptors.response.use(({ data }) => data, resError);\n\nexport default (data, fn) => {\n  instance(data).then((res) => {\n    fn(res);\n  });\n};\n","import events from 'eventslibjs';\n\nfunction wrapper(name, event, target, fn) {\n  events[name](event, target, (e) => {\n    const currentTarget = _.isString(target) ? e.target.closest(target) : target;\n    fn(e, currentTarget);\n  });\n}\n\nexport default {\n  on(...args) { wrapper('on', ...args); },\n\n  once(...args) { wrapper('once', ...args); },\n\n  off: events.off,\n\n  get: events.get,\n\n  emit(name, el = document, params = {}) {\n    const event = new CustomEvent(name, { detail: params });\n    el.dispatchEvent(event);\n  },\n};\n","import {\n  observable,\n  computed,\n  action,\n  decorate,\n  autorun,\n  transaction,\n  toJS,\n} from 'mobx';\n\nclass Store {\n  constructor() {\n    this.basket = [];\n  }\n\n  get total() {\n    console.log('get total()');\n    return _.reduce(this.basket, (prev, curr) => prev + curr.price, 0);\n  }\n\n  select(name, price) {\n    this.basket.push({ name, price });\n  }\n}\n\ndecorate(Store, {\n  basket: observable,\n  total: computed,\n  select: action,\n});\n\nconst store = new Store();\n\nautorun(() => store.total);\n\nautorun(() => {\n  if (_.size(store.basket)) {\n    console.log(toJS(store.basket));\n  }\n});\n\ntransaction(() => {\n  store.select('html', 800);\n  store.select('css', 800);\n  store.select('js', 1500);\n});\n\nexport default store;\n","import $ from 'common/tools';\n\nclass Tpl {\n  constructor() {\n    this.private = {\n      templates: $.el('#templates'),\n    };\n  }\n\n  get(name) {\n    let markup = '';\n    if (_.isString(name) && Boolean(name)) {\n      const el = $.el(`[title=\"${name}\"]`, this.private.templates);\n      markup = _.trim(el.textContent);\n    }\n    return markup;\n  }\n\n  render(state, template) {\n    const markup = this.get(template);\n    const compiled = _.template(markup);\n    const data = _.assign({ _ }, state);\n    return compiled(data);\n  }\n}\n\nconst tpl = new Tpl();\n\nexport default tpl;\n","import { e } from 'libs';\nimport $ from 'common/tools';\n\nclass YouTube {\n  constructor() {\n    this.list = [];\n    this.src = 'https://www.youtube.com/iframe_api';\n    this.iframe = '<i class=\"youtube__media js-youtube-api\"></i>';\n    this.params = {\n      autoplay: 1,\n      showinfo: 0,\n      rel: 0,\n    };\n  }\n\n  init() {\n    const videos = $.all('.js-youtube');\n\n    if (!videos.length) return;\n\n    this.addJs();\n    window.onYouTubeIframeAPIReady = this.onYouTubeIframeAPIReady.bind(this, videos);\n  }\n\n  setPlayer(el) {\n    el.innerHTML = this.iframe;\n    const player = $.el('.js-youtube-api', el);\n    const videoId = el.getAttribute('data-id');\n\n    new window.YT.Player(player, { // eslint-disable-line no-new\n      videoId,\n      playerVars: this.params,\n      events: {\n        onReady: this.onReady.bind(this),\n        onStateChange: this.onStateChange.bind(this),\n      },\n    });\n  }\n\n  onReady(event) {\n    this.list.push(event.target);\n  }\n\n  onStateChange(event) {\n    if (event.data !== window.YT.PlayerState.PLAYING) return;\n\n    _.each(this.list, (video) => {\n      if (event.target !== video) video.stopVideo();\n    });\n  }\n\n  onYouTubeIframeAPIReady(videos) {\n    _.each(videos, (video) => {\n      this.setupVideo(video);\n    });\n  }\n\n  setupVideo(video) {\n    const link = $.el('.js-youtube--link', video);\n    link.removeAttribute('href');\n    link.removeAttribute('target');\n    video.classList.add('youtube--enabled');\n\n    e.once('click', video, () => {\n      this.setPlayer(video);\n    });\n  }\n\n  addJs() {\n    const firstScript = $.el('script');\n    const script = document.createElement('script');\n    script.src = this.src;\n    firstScript.parentNode.insertBefore(script, firstScript);\n  }\n}\n\nconst youtube = new YouTube();\n\nexport default youtube;\n","import { Ajax, e } from 'libs';\nimport $ from 'common/tools';\nimport store from 'root/store';\nimport tpl from 'components/templates/templates';\nimport youtube from 'components/youtube/youtube';\n\n$.ready(() => {\n  youtube.init();\n  console.log(store.total);\n\n  Ajax({\n    data: { request: 'axios' },\n  }, (json) => {\n    console.log(json);\n  });\n\n  Ajax({\n    method: 'get',\n    url: 'https://jsonplaceholder.typicode.com/todos/1',\n  }, (json) => {\n    document.body.insertAdjacentHTML('beforeend', tpl.render(json, 'template'));\n  });\n\n  e.once('custom:event', document, () => {\n    console.log('Event: custom:event');\n  });\n\n  e.emit('custom:event');\n\n  console.log(e.get());\n  console.log($.getSearch('?q=URLUtils.searchParams&topic=api&topic=webdev').get('q'));\n  console.log($.strSearch({\n    q: 'URLUtils.searchParams',\n    topic: 'webdev',\n  }));\n});\n"],"sourceRoot":""}